<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Content Manager</title>
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body>
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>

  <script>
    // Hàm này sẽ chạy ngay khi trang web tải xong
    window.onload = function() {
      // Kiểm tra nếu là màn hình nhỏ (điện thoại)
      if (window.innerWidth <= 768) {
        
        console.log("Đang kích hoạt giao diện Mobile V5...");
        
        // Tạo thẻ Style mới
        var css = `
          /* --- BẮT ĐẦU CSS MOBILE --- */
          
          /* 1. RESET KHUNG NHÌN */
          body, html { overflow-x: hidden !important; background: #f0f2f5 !important; }
          
          /* HIỂN THỊ DẤU HIỆU ĐÃ LOAD (DEBUG) */
          body::before {
            content: 'Mobile Mode V5';
            position: fixed; top: 0; left: 0; 
            background: red; color: white; font-size: 8px; 
            padding: 2px; z-index: 999999; pointer-events: none;
          }

          /* 2. ÉP GIAO DIỆN 1 CỘT (QUAN TRỌNG NHẤT) */
          div[class*="SplitPaneContainer"],
          .nc-app-main {
             display: flex !important;
             flex-direction: column !important;
             width: 100vw !important;
             height: auto !important;
             min-height: 100vh !important;
          }

          /* 3. MENU NGANG (THANH TRƯỢT) */
          div[class*="SidebarContainer"] {
            width: 100% !important;
            height: 50px !important;
            position: sticky !important;
            top: 0; left: 0; right: 0;
            display: flex !important;
            flex-direction: row !important;
            overflow-x: auto !important; /* Vuốt ngang */
            background: #fff !important;
            border-bottom: 2px solid #f57c00 !important;
            z-index: 10000 !important;
            padding: 5px !important;
            order: 1 !important; /* Đẩy lên đầu */
            white-space: nowrap !important;
          }
          
          /* Ẩn logo/icon thừa trong menu */
          div[class*="SidebarContainer"] a[class*="SidebarBrand"] { display: none !important; }

          /* Style nút bấm trong menu */
          a[class*="SidebarNavLink"] {
            display: inline-block !important;
            padding: 5px 15px !important;
            margin-right: 8px !important;
            background: #eee !important;
            border-radius: 20px !important;
            color: #333 !important;
            height: 30px !important;
            line-height: 20px !important;
            flex-shrink: 0 !important; /* Không bị co lại */
          }
          
          a[class*="SidebarNavLink"].sidebar-active {
            background: #ffe0b2 !important;
            color: #e65100 !important;
            font-weight: bold !important;
          }
          
          a[class*="SidebarNavLink"] svg { display: none !important; }
          a[class*="SidebarNavLink"] span { display: block !important; }

          /* 4. DANH SÁCH BÀI VIẾT */
          div[class*="CollectionPage"] {
            width: 100% !important;
            order: 2 !important;
            padding: 10px !important;
            padding-bottom: 80px !important;
          }

          /* Từng bài viết */
          a[class*="CollectionList-item"] {
            display: block !important;
            width: 100% !important;
            margin-bottom: 10px !important;
            background: #fff !important;
            padding: 15px !important;
            border-radius: 8px !important;
            border-left: 4px solid #f57c00 !important;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1) !important;
          }

          /* 5. NÚT (+) TẠO BÀI */
          a[class*="RepoHeader-createNew"],
          button[class*="RepoHeader-createNew"] {
            position: fixed !important;
            bottom: 20px !important;
            right: 20px !important;
            width: 56px !important;
            height: 56px !important;
            border-radius: 50% !important;
            background: #f57c00 !important;
            color: transparent !important;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3) !important;
            z-index: 99999 !important;
            display: flex !important;
            justify-content: center !important;
            align-items: center !important;
            padding: 0 !important;
          }
          
          a[class*="RepoHeader-createNew"]::after,
          button[class*="RepoHeader-createNew"]::after {
            content: "+"; font-size: 35px; color: #fff; margin-top: -5px;
          }

          /* 6. EDITOR FULL MÀN HÌNH */
          .cms-editor-container .SplitPane-Pane:nth-child(2) { display: none !important; }
          .cms-editor-container .SplitPane-Pane:nth-child(1) { width: 100% !important; padding: 0 !important; }
          
          /* Input tiêu đề to */
          div[class*="ControlPane-ControlContainer"]:first-child input {
             font-size: 20px !important; border-bottom: 2px solid #ddd !important;
          }
          
          /* --- KẾT THÚC CSS MOBILE --- */
        `;

        var style = document.createElement('style');
        style.type = 'text/css';
        style.appendChild(document.createTextNode(css));
        document.head.appendChild(style);
      }
    };
  </script>
</body>
</html>